<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CPPLapack: dsymatrix-io.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000021.html">dsymatrix-</a></div>
<h1>dsymatrix-io.hpp</h1><a href="dsymatrix-io_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">//=============================================================================</span><span class="comment"></span>
00002 <span class="comment">/*! operator() for non-const object */</span>
<a name="l00003"></a><a class="code" href="classdsymatrix.html#a9">00003</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>&amp; <a class="code" href="classdsymatrix.html#a9">dsymatrix::operator()</a>(<span class="keyword">const</span> <span class="keywordtype">long</span>&amp; i, <span class="keyword">const</span> <span class="keywordtype">long</span>&amp; j)
00004 {
00005 <span class="preprocessor">#ifdef  CPPL_VERBOSE</span>
00006 <span class="preprocessor"></span>  std::cerr &lt;&lt; <span class="stringliteral">"# [MARK] dsymatrix::operator()(const long&amp;, const long&amp;)"</span>
00007             &lt;&lt; std::endl;
00008 <span class="preprocessor">#endif//CPPL_VERBOSE</span>
00009 <span class="preprocessor"></span>  
00010 <span class="preprocessor">#ifdef  CPPL_DEBUG</span>
00011 <span class="preprocessor"></span>  <span class="keywordflow">if</span>( <a class="code" href="classdsymatrix.html#n15">i</a>&lt;0 || j&lt;0 || <a class="code" href="classdsymatrix.html#r0">N</a>&lt;=<a class="code" href="classdsymatrix.html#n15">i</a> || <a class="code" href="classdsymatrix.html#r0">N</a>&lt;=j ){
00012     std::cerr &lt;&lt; <span class="stringliteral">"[ERROR] dsymatrix::operator()(long, long)"</span> &lt;&lt; std::endl
00013               &lt;&lt; <span class="stringliteral">"The required component is out of the matrix size."</span>
00014               &lt;&lt; std::endl
00015               &lt;&lt; <span class="stringliteral">"Your input was ("</span> &lt;&lt; <a class="code" href="classdsymatrix.html#n15">i</a> &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">")."</span> &lt;&lt; std::endl;
00016     exit(1);
00017   }
00018 <span class="preprocessor">#endif//CPPL_DEBUG</span>
00019 <span class="preprocessor"></span>  
00020   <span class="keywordflow">if</span>( <a class="code" href="classdsymatrix.html#n15">i</a> &gt;= j ) {
00021     <span class="comment">//return Array[i+N*j];</span>
00022     <span class="keywordflow">return</span> <a class="code" href="classdsymatrix.html#r2">Darray</a>[j][<a class="code" href="classdsymatrix.html#n15">i</a>];
00023   } <span class="keywordflow">else</span> {
00024     <span class="comment">//return Array[j+N*i];</span>
00025     <span class="keywordflow">return</span> <a class="code" href="classdsymatrix.html#r2">Darray</a>[<a class="code" href="classdsymatrix.html#n15">i</a>][j];
00026   }
00027 }
00028 
00029 <span class="comment">//=============================================================================</span><span class="comment"></span>
00030 <span class="comment">/*! operator() for const object */</span>
<a name="l00031"></a><a class="code" href="classdsymatrix.html#a10">00031</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="classdsymatrix.html#a9">dsymatrix::operator()</a>(<span class="keyword">const</span> <span class="keywordtype">long</span>&amp; i, <span class="keyword">const</span> <span class="keywordtype">long</span>&amp; j)<span class="keyword"> const</span>
00032 <span class="keyword"></span>{
00033 <span class="preprocessor">#ifdef  CPPL_VERBOSE</span>
00034 <span class="preprocessor"></span>  std::cerr &lt;&lt; <span class="stringliteral">"# [MARK] dsymatrix::operator()(const long&amp;, const long&amp;) const"</span>
00035             &lt;&lt; std::endl;
00036 <span class="preprocessor">#endif//CPPL_VERBOSE</span>
00037 <span class="preprocessor"></span>  
00038 <span class="preprocessor">#ifdef  CPPL_DEBUG</span>
00039 <span class="preprocessor"></span>  <span class="keywordflow">if</span>( <a class="code" href="classdsymatrix.html#n15">i</a>&lt;0 || j&lt;0 || <a class="code" href="classdsymatrix.html#r0">N</a>&lt;=<a class="code" href="classdsymatrix.html#n15">i</a> || <a class="code" href="classdsymatrix.html#r0">N</a>&lt;=j ){
00040     std::cerr &lt;&lt; <span class="stringliteral">"[ERROR] dsymatrix::operator()(long, long)"</span> &lt;&lt; std::endl
00041               &lt;&lt; <span class="stringliteral">"The required component is out of the matrix size."</span>
00042               &lt;&lt; std::endl
00043               &lt;&lt; <span class="stringliteral">"Your input was ("</span> &lt;&lt; <a class="code" href="classdsymatrix.html#n15">i</a> &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">")."</span> &lt;&lt; std::endl;
00044     exit(1);
00045   }
00046 <span class="preprocessor">#endif//CPPL_DEBUG</span>
00047 <span class="preprocessor"></span>  
00048   <span class="keywordflow">if</span>( <a class="code" href="classdsymatrix.html#n15">i</a> &gt;= j ) {
00049     <span class="comment">//return Array[i+N*j];</span>
00050     <span class="keywordflow">return</span> <a class="code" href="classdsymatrix.html#r2">Darray</a>[j][<a class="code" href="classdsymatrix.html#n15">i</a>];
00051   } <span class="keywordflow">else</span> {
00052     <span class="comment">//return Array[j+N*i];</span>
00053     <span class="keywordflow">return</span> <a class="code" href="classdsymatrix.html#r2">Darray</a>[<a class="code" href="classdsymatrix.html#n15">i</a>][j];
00054   }
00055 }
00056 <span class="comment"></span>
00057 <span class="comment">///////////////////////////////////////////////////////////////////////////////</span>
00058 <span class="comment">///////////////////////////////////////////////////////////////////////////////</span>
00059 <span class="comment">///////////////////////////////////////////////////////////////////////////////</span>
00060 <span class="comment"></span>
00061 <span class="comment">//=============================================================================</span><span class="comment"></span>
00062 <span class="comment">/*! set value for const object */</span>
<a name="l00063"></a><a class="code" href="classdsymatrix.html#a11">00063</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classdsymatrix.html#a11">dsymatrix::set</a>(<span class="keyword">const</span> <span class="keywordtype">long</span>&amp; i, <span class="keyword">const</span> <span class="keywordtype">long</span>&amp; j, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; v)<span class="keyword"> const</span>
00064 <span class="keyword"></span>{
00065 <span class="preprocessor">#ifdef  CPPL_VERBOSE</span>
00066 <span class="preprocessor"></span>  std::cerr &lt;&lt; <span class="stringliteral">"# [MARK] dsymatrix::set(const long&amp;, const long&amp;, const double&amp;) const"</span>
00067             &lt;&lt; std::endl;
00068 <span class="preprocessor">#endif//CPPL_VERBOSE</span>
00069 <span class="preprocessor"></span>  
00070 <span class="preprocessor">#ifdef  CPPL_DEBUG</span>
00071 <span class="preprocessor"></span>  <span class="keywordflow">if</span>( <a class="code" href="classdsymatrix.html#n15">i</a>&lt;0 || j&lt;0 || <a class="code" href="classdsymatrix.html#r0">N</a>&lt;=<a class="code" href="classdsymatrix.html#n15">i</a> || <a class="code" href="classdsymatrix.html#r0">N</a>&lt;=j ){
00072     std::cerr &lt;&lt; <span class="stringliteral">"[ERROR] dsymatrix::set(long&amp;, long&amp;, double&amp;) const"</span>
00073               &lt;&lt; std::endl
00074               &lt;&lt; <span class="stringliteral">"The required component is out of the matrix size."</span>
00075               &lt;&lt; std::endl
00076               &lt;&lt; <span class="stringliteral">"Your input was ("</span> &lt;&lt; <a class="code" href="classdsymatrix.html#n15">i</a> &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">")."</span> &lt;&lt; std::endl;
00077     exit(1);
00078   }
00079 <span class="preprocessor">#endif//CPPL_DEBUG</span>
00080 <span class="preprocessor"></span>  
00081   <span class="keywordflow">if</span>( <a class="code" href="classdsymatrix.html#n15">i</a> &gt;= j ) {
00082     <span class="comment">//Array[i+N*j] = v;</span>
00083     <a class="code" href="classdsymatrix.html#r2">Darray</a>[j][<a class="code" href="classdsymatrix.html#n15">i</a>] =v;
00084   } <span class="keywordflow">else</span> {
00085     <span class="comment">//Array[j+N*i] = v;</span>
00086     <a class="code" href="classdsymatrix.html#r2">Darray</a>[j][<a class="code" href="classdsymatrix.html#n15">i</a>] =v;
00087   }
00088 }
00089 <span class="comment"></span>
00090 <span class="comment">///////////////////////////////////////////////////////////////////////////////</span>
00091 <span class="comment">///////////////////////////////////////////////////////////////////////////////</span>
00092 <span class="comment">///////////////////////////////////////////////////////////////////////////////</span>
00093 <span class="comment"></span>
00094 <span class="comment">//=============================================================================</span>
<a name="l00095"></a><a class="code" href="dsymatrix-io_8hpp.html#a0">00095</a> <span class="keyword">inline</span> std::ostream&amp; <a class="code" href="__dcovector-io_8hpp.html#a0">operator&lt;&lt;</a>(std::ostream&amp; s, <span class="keyword">const</span> <a class="code" href="classdsymatrix.html">dsymatrix</a>&amp; mat)
00096 {
00097 <span class="preprocessor">#ifdef  CPPL_VERBOSE</span>
00098 <span class="preprocessor"></span>  std::cerr &lt;&lt; <span class="stringliteral">"# [MARK] operator&lt;&lt;(std::ostream&amp;, const dsymatrix&amp;)"</span>
00099             &lt;&lt; std::endl;
00100 <span class="preprocessor">#endif//CPPL_VERBOSE</span>
00101 <span class="preprocessor"></span>  
00102   <span class="keywordflow">for</span>(<span class="keywordtype">long</span> <a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>=0; <a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>&lt;mat.<a class="code" href="class__dgematrix.html#o1">N</a>; <a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>++){
00103     <span class="keywordflow">for</span>(<span class="keywordtype">long</span> j=0; j&lt;mat.N; j++){
00104       <span class="keywordflow">if</span>( <a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a> &gt;= j ) {
00105         s &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; mat(<a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>,j) &lt;&lt; <span class="stringliteral">"  "</span>;
00106       } <span class="keywordflow">else</span> {
00107         s &lt;&lt; <span class="stringliteral">"{"</span> &lt;&lt; mat(<a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>,j) &lt;&lt; <span class="stringliteral">"} "</span>;
00108       }
00109     }
00110     s &lt;&lt; std::endl;
00111   }
00112   <span class="keywordflow">return</span> s;
00113 }
00114 <span class="comment"></span>
00115 <span class="comment">///////////////////////////////////////////////////////////////////////////////</span>
00116 <span class="comment">///////////////////////////////////////////////////////////////////////////////</span>
00117 <span class="comment">///////////////////////////////////////////////////////////////////////////////</span>
00118 <span class="comment"></span>
00119 <span class="comment">//=============================================================================</span>
<a name="l00120"></a><a class="code" href="classdsymatrix.html#a12">00120</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classdsymatrix.html#a12">dsymatrix::write</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename)<span class="keyword"> const</span>
00121 <span class="keyword"></span>{
00122 <span class="preprocessor">#ifdef  CPPL_VERBOSE</span>
00123 <span class="preprocessor"></span>  std::cerr &lt;&lt; <span class="stringliteral">"# [MARK] dsymatrix::write(const char*) const"</span>
00124             &lt;&lt; std::endl;
00125 <span class="preprocessor">#endif//CPPL_VERBOSE</span>
00126 <span class="preprocessor"></span>  
00127   std::ofstream s(filename, std::ios::trunc);
00128   
00129   s &lt;&lt; <span class="stringliteral">"dsymatrix"</span> &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; <a class="code" href="classdsymatrix.html#r0">N</a> &lt;&lt; std::endl;
00130   <span class="keywordflow">for</span>(<span class="keywordtype">long</span> <a class="code" href="classdsymatrix.html#n15">i</a>=0; <a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>&lt;<a class="code" href="classdsymatrix.html#r0">N</a>; <a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>++){
00131     <span class="keywordflow">for</span>(<span class="keywordtype">long</span> j=0; j&lt;=<a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>; j++ ){
00132       s &lt;&lt; <a class="code" href="classdsymatrix.html#a9">operator()</a>(<a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>,j) &lt;&lt; <span class="stringliteral">" "</span>;
00133     }
00134     s &lt;&lt; std::endl;
00135   }
00136   
00137   s.close();
00138 }
00139 
00140 <span class="comment">//=============================================================================</span>
<a name="l00141"></a><a class="code" href="classdsymatrix.html#a13">00141</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classdsymatrix.html#a13">dsymatrix::read</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename)
00142 {
00143 <span class="preprocessor">#ifdef  CPPL_VERBOSE</span>
00144 <span class="preprocessor"></span>  std::cerr &lt;&lt; <span class="stringliteral">"# [MARK] dsymatrix::read(const char*)"</span>
00145             &lt;&lt; std::endl;
00146 <span class="preprocessor">#endif//CPPL_VERBOSE</span>
00147 <span class="preprocessor"></span>  
00148   std::ifstream s(filename);
00149   <span class="keywordflow">if</span>(!s){
00150     std::cerr &lt;&lt; <span class="stringliteral">"[ERROR] dsymatrix::read(const char*) "</span> &lt;&lt; std::endl
00151               &lt;&lt; <span class="stringliteral">"The file \""</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">"\" can not be opened."</span>
00152               &lt;&lt; std::endl;
00153     exit(1);
00154   }
00155 
00156   std::string id;
00157   s &gt;&gt; id;
00158   <span class="keywordflow">if</span>( <span class="keywordtype">id</span> != <span class="stringliteral">"dsymatrix"</span> ){
00159     std::cerr &lt;&lt; <span class="stringliteral">"[ERROR] dsymatrix::read(const char*) "</span> &lt;&lt; std::endl
00160               &lt;&lt; <span class="stringliteral">"The type name of the file \""</span> &lt;&lt; filename
00161               &lt;&lt; <span class="stringliteral">"\" is not dsymatrix."</span> &lt;&lt; std::endl
00162               &lt;&lt; <span class="stringliteral">"Its type name was "</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">" ."</span> &lt;&lt; std::endl;
00163     exit(1);
00164   }
00165   
00166   s &gt;&gt; <a class="code" href="classdsymatrix.html#r0">N</a>;
00167   <a class="code" href="classdsymatrix.html#a21">resize</a>(N);
00168   <span class="keywordflow">for</span>(<span class="keywordtype">long</span> <a class="code" href="classdsymatrix.html#n15">i</a>=0; <a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>&lt;N; <a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>++){
00169     <span class="keywordflow">for</span>(<span class="keywordtype">long</span> j=0; j&lt;=<a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>; j++ ){
00170       s &gt;&gt; <a class="code" href="classdsymatrix.html#a9">operator()</a>(<a class="code" href="__dgbmatrix-calc_8hpp.html#a1">i</a>,j);
00171     }
00172   }
00173   <span class="keywordflow">if</span>(s.eof()){
00174     std::cerr &lt;&lt; <span class="stringliteral">"[ERROR] dsymatrix::read(const char*) "</span> &lt;&lt; std::endl
00175               &lt;&lt; <span class="stringliteral">"There is something is wrong with the file \""</span>
00176               &lt;&lt; filename &lt;&lt; <span class="stringliteral">" ."</span> &lt;&lt; std::endl
00177               &lt;&lt; <span class="stringliteral">"Most likely, there is not enough data components, "</span>
00178               &lt;&lt; <span class="stringliteral">"or a linefeed code or space code is missing "</span>
00179               &lt;&lt; <span class="stringliteral">"at the end of the last line."</span> &lt;&lt; std::endl;
00180     exit(1);
00181   }
00182   
00183   s.close();
00184 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri Mar 25 17:28:24 2005 for CPPLapack by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.1 </small></address>
</body>
</html>
